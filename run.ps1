# –î–æ–±–∞–≤–ª—è–µ–º MinGW –≤ PATH
$env:PATH += ";C:\mingw-w64\mingw64\bin"

# –ï—Å–ª–∏ –ø–∞–ø–∫–∏ build –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë–º –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
if (-not (Test-Path "build")) {
    Write-Host "–ü–∞–ø–∫–∏ build –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—é –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é –ø—Ä–æ–µ–∫—Ç..."
    cmake -S . -B build -G "MinGW Makefiles"
} else {
    Write-Host "–ü–∞–ø–∫–∞ build —É–∂–µ –µ—Å—Ç—å ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é."
}

# –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
cmake --build build --config Release

# –ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º
if ($LASTEXITCODE -eq 0) {
    Write-Host "üöÄ –ó–∞–ø—É—Å–∫–∞—é –ø—Ä–æ–≥—Ä–∞–º–º—É..."
    .\build\miyoo_square.exe
} else {
    Write-Host "–û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏. –ò—Å–ø—Ä–∞–≤—å –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞."
}
